<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Checker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .check-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .success { color: #28a745; background: #d4edda; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .error { color: #dc3545; background: #f8d7da; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .warning { color: #856404; background: #fff3cd; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .info { color: #004085; background: #cce5ff; padding: 15px; border-radius: 5px; margin: 10px 0; }
        code { background: #f8f9fa; padding: 2px 6px; border-radius: 3px; }
        h1 { color: #333; }
        h2 { color: #555; margin-top: 30px; }
    </style>
</head>
<body>
    <div class="check-container">
        <h1>üîç Setup Checker</h1>
        
        <h2>1. Protocol Check</h2>
        <div id="protocol-check"></div>
        
        <h2>2. PHP Test</h2>
        <div id="php-check">Testing...</div>
        
        <h2>3. API Test</h2>
        <div id="api-check">Testing...</div>
        
        <h2>4. Instructions</h2>
        <div class="info">
            <p><strong>To fix PHP execution issues:</strong></p>
            <ol>
                <li>Open XAMPP Control Panel</li>
                <li>Start <strong>Apache</strong> (should show green/running)</li>
                <li>Start <strong>MySQL</strong> (should show green/running)</li>
                <li>Access your site via: <code>http://localhost/Project Phase 1/index.html</code></li>
                <li><strong>DO NOT</strong> use <code>npm start</code> or <code>live-server</code> - they don't execute PHP!</li>
                <li><strong>DO NOT</strong> open HTML files directly (file:// protocol)</li>
            </ol>
        </div>
    </div>
    
    <script>
        // Check protocol
        const protocolDiv = document.getElementById('protocol-check');
        if (window.location.protocol === 'file:') {
            protocolDiv.innerHTML = '<div class="error">‚ùå Using <code>file://</code> protocol - PHP will NOT work!</div>';
        } else if (window.location.protocol === 'http:' || window.location.protocol === 'https:') {
            protocolDiv.innerHTML = '<div class="success">‚úì Using <code>' + window.location.protocol + '</code> protocol - Good!</div>';
        } else {
            protocolDiv.innerHTML = '<div class="warning">‚ö† Using <code>' + window.location.protocol + '</code> protocol</div>';
        }
        
        // Test PHP
        fetch('test_php.php')
            .then(res => res.text())
            .then(text => {
                const phpDiv = document.getElementById('php-check');
                if (text.includes('PHP is working!')) {
                    phpDiv.innerHTML = '<div class="success">‚úì PHP is executing correctly!</div>';
                } else if (text.includes('<?php')) {
                    phpDiv.innerHTML = '<div class="error">‚ùå PHP is NOT executing - raw PHP code returned</div>';
                } else {
                    phpDiv.innerHTML = '<div class="warning">‚ö† Unexpected response from PHP test</div>';
                }
            })
            .catch(err => {
                document.getElementById('php-check').innerHTML = '<div class="error">‚ùå Cannot access test_php.php: ' + err.message + '</div>';
            });
        
        // Test API
        fetch('api/get_events.php')
            .then(res => res.text())
            .then(text => {
                const apiDiv = document.getElementById('api-check');
                if (text.trim().startsWith('<?php')) {
                    apiDiv.innerHTML = '<div class="error">‚ùå API returning raw PHP code - PHP is NOT executing!</div>';
                } else {
                    try {
                        JSON.parse(text);
                        apiDiv.innerHTML = '<div class="success">‚úì API is returning valid JSON!</div>';
                    } catch (e) {
                        apiDiv.innerHTML = '<div class="error">‚ùå API response is not valid JSON: ' + text.substring(0, 100) + '</div>';
                    }
                }
            })
            .catch(err => {
                document.getElementById('api-check').innerHTML = '<div class="error">‚ùå Cannot access API: ' + err.message + '</div>';
            });
    </script>
</body>
</html>



